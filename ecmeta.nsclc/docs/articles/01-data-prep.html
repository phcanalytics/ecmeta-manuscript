<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preparation and exploration of external control datasets • ecmeta.nsclc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Preparation and exploration of external control datasets">
<meta property="og:description" content="ecmeta.nsclc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ecmeta.nsclc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">API</a>
</li>
<li>
  <a href="../sap/sap.pdf">Analysis plan</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-data-prep.html">Data preparation</a>
    </li>
    <li>
      <a href="../articles/02-impute.html">Imputation of missing data</a>
    </li>
    <li>
      <a href="../articles/03-balance.html">Propensity score estimation, weighting, and balance</a>
    </li>
    <li>
      <a href="https://connect.phcaa.science.roche.com/content/1102">Propensity score estimation, weighting, and balance (Shiny app)</a>
    </li>
    <li>
      <a href="../articles/04-ate-trt-ec.html">Treatment effect estimates: RCT experimental vs external control</a>
    </li>
    <li>
      <a href="../articles/05-ic-ec.html">Comparison of the internal and external control arms</a>
    </li>
    <li>
      <a href="../articles/06-ecmeta.html">Meta-analytic adjustment of hazard ratios</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.roche.com/incertid/ecmeta-manuscript/tree/master/ecmeta.nsclc/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="01-data-prep_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="01-data-prep_files/kePrint-0.0.1/kePrint.js"></script><link href="01-data-prep_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Preparation and exploration of external control datasets</h1>
            
            <h4 class="date">2021-09-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.roche.com/incertid/ecmeta-manuscript/tree/master/ecmeta.nsclc/vignettes/01-data-prep.Rmd"><code>vignettes/01-data-prep.Rmd</code></a></small>
      <div class="hidden name"><code>01-data-prep.Rmd</code></div>

    </div>

    
    
<div id="setup" class="section level1">
<h1 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h1>
<p>The purpose of this analysis is to explore the data, specifically the (i) amount of missingness in potential covariates, (ii) small sample sizes among categories of categorical variables, and (iii) the distribution of potential covariates across the treated and control groups prior to any adjustment. The following <code>R</code> packages are used.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># R packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">"dplyr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">"ecdata"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.roche.com/incertid/ecmeta-manuscript/tree/master/ecmeta.nsclc">"ecmeta.nsclc"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org">"ggplot2"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="http://haozhu233.github.io/kableExtra/">"kableExtra"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/rstudio/pins">"pins"</a></span><span class="op">)</span>

<span class="co"># Settings</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="data" class="section level1">
<h1 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h1>
<p>The underlying dataset used for the analysis is built using the <a href="https://pages.github.roche.com/RWDScodeshare/ecdata/index.html"><code>ecdata</code></a> package. It consists of patients with advanced non-small cell lung cancer (NSCLC) and is documented <a href="https://pages.github.roche.com/RWDScodeshare/ecdata/reference/nsclc.html">here</a>. The <code>pins_nsclc()</code> pins the datasets locally using <code><a href="https://rdrr.io/pkg/pins/man/pin.html">pins::pin()</a></code> so that the dataset only needs to be built once. We preprocess the data into a format more suitable for propensity score modeling with the <code>preprocess()</code> function and filter to remove the comparator arm from the RCT in order to emulate a single arm trial.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ecdata</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ecdata/man/pin_disease.html">pin_nsclc</a></span><span class="op">(</span>update <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># Pins dataset locally</span>
<span class="va">nsclc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pins/man/pin_get.html">pin_get</a></span><span class="op">(</span><span class="st">"nsclc"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">preprocess</span><span class="op">(</span><span class="op">)</span>
<span class="va">ec_rct1</span> <span class="op">&lt;-</span> <span class="va">nsclc</span> <span class="op">%&gt;%</span> <span class="co"># Hypothetical single arm trial with external control</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">source_type</span> <span class="op">==</span> <span class="st">"RCT"</span> <span class="op">&amp;</span> <span class="va">arm_type</span> <span class="op">==</span> <span class="st">"Comparator"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>All pairwise comparisons that will be used in the analyses are displayed in the table below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="fu">new_analysis</span><span class="op">(</span><span class="va">nsclc</span><span class="op">)</span>  

<span class="va">analysis</span> <span class="op">%&gt;%</span>
 <span class="fu">html_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
 <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="2">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Source
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Arm
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
N
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Number
</th>
<th style="text-align:left;">
ID
</th>
<th style="text-align:left;">
External
</th>
<th style="text-align:left;">
Trial
</th>
<th style="text-align:left;">
External
</th>
<th style="text-align:left;">
Trial
</th>
<th style="text-align:right;">
External control
</th>
<th style="text-align:right;">
Internal control
</th>
<th style="text-align:right;">
Experimental arm
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
nct02008227_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT02008227
</td>
<td style="text-align:left;">
Docetaxel
</td>
<td style="text-align:left;">
Atezolizumab
</td>
<td style="text-align:right;">
526
</td>
<td style="text-align:right;">
425
</td>
<td style="text-align:right;">
425
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
nct01903993_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01903993
</td>
<td style="text-align:left;">
Docetaxel
</td>
<td style="text-align:left;">
Atezolizumab
</td>
<td style="text-align:right;">
476
</td>
<td style="text-align:right;">
143
</td>
<td style="text-align:right;">
144
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
nct02366143_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT02366143
</td>
<td style="text-align:left;">
Bevacizumab + Carboplatin
</td>
<td style="text-align:left;">
Atezolizumab + Bevacizumab + Carboplatin
</td>
<td style="text-align:right;">
602
</td>
<td style="text-align:right;">
336
</td>
<td style="text-align:right;">
356
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
nct01351415_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01351415
</td>
<td style="text-align:left;">
SOC
</td>
<td style="text-align:left;">
Bevacizumab + SOC
</td>
<td style="text-align:right;">
381
</td>
<td style="text-align:right;">
240
</td>
<td style="text-align:right;">
245
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
nct01519804_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01519804
</td>
<td style="text-align:left;">
Placebo + Platinum + Paclitaxel
</td>
<td style="text-align:left;">
MetMAb + Platinum + Paclitaxel
</td>
<td style="text-align:right;">
1945
</td>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
55
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
nct01496742_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01496742
</td>
<td style="text-align:left;">
Placebo + Bevacizumab + Platinum
</td>
<td style="text-align:left;">
MetMAb + Bevacizumab + Platinum + Paclitaxel
</td>
<td style="text-align:right;">
956
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
69
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
nct01496742_fi_2
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01496742
</td>
<td style="text-align:left;">
Placebo + Platinum + Pemetrexed
</td>
<td style="text-align:left;">
MetMAb + Platinum + Pemetrexed
</td>
<td style="text-align:right;">
3244
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
59
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
nct01366131_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01366131
</td>
<td style="text-align:left;">
Placebo + Bevacizumab + Carboplatin + Paclitaxel
</td>
<td style="text-align:left;">
MEGF0444A + Bevacizumab + Carboplatin + Paclitaxel
</td>
<td style="text-align:right;">
963
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
52
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
nct01493843_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01493843
</td>
<td style="text-align:left;">
Placebo (340 mg) + Carboplatin + Paclitaxel
</td>
<td style="text-align:left;">
Pictilisib (340 mg) + Carboplatin + Paclitaxel
</td>
<td style="text-align:right;">
1274
</td>
<td style="text-align:right;">
125
</td>
<td style="text-align:right;">
126
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
nct01493843_fi_2
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01493843
</td>
<td style="text-align:left;">
Placebo (340 mg) + Carboplatin + Paclitaxel + Bevacizumab
</td>
<td style="text-align:left;">
Pictilisib (340 mg) + Carboplatin + Paclitaxel + Bevacizumab
</td>
<td style="text-align:right;">
953
</td>
<td style="text-align:right;">
79
</td>
<td style="text-align:right;">
79
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
nct01493843_fi_3
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT01493843
</td>
<td style="text-align:left;">
Placebo (260 mg) + Carboplatin + Paclitaxel + Bevacizumab
</td>
<td style="text-align:left;">
Pictilisib (260 mg) + Carboplatin + Paclitaxel + Bevacizumab
</td>
<td style="text-align:right;">
953
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
nct02367781_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT02367781
</td>
<td style="text-align:left;">
Nab-Paclitaxel + Carboplatin
</td>
<td style="text-align:left;">
Atezolizumab + Nab-Paclitaxel + Carboplatin
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
228
</td>
<td style="text-align:right;">
451
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
nct02367794_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT02367794
</td>
<td style="text-align:left;">
Nab-Paclitaxel + Carboplatin
</td>
<td style="text-align:left;">
Atezolizumab + Nab-Paclitaxel + Carboplatin
</td>
<td style="text-align:right;">
497
</td>
<td style="text-align:right;">
340
</td>
<td style="text-align:right;">
343
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
nct02657434_fi_1
</td>
<td style="text-align:left;">
Flatiron
</td>
<td style="text-align:left;">
NCT02657434
</td>
<td style="text-align:left;">
Carboplatin or Cisplatin + Pemetrexed
</td>
<td style="text-align:left;">
Atezolizumab + Carboplatin or Cisplatin + Pemetrexed
</td>
<td style="text-align:right;">
1536
</td>
<td style="text-align:right;">
286
</td>
<td style="text-align:right;">
292
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="missing-data" class="section level1">
<h1 class="hasAnchor">
<a href="#missing-data" class="anchor"></a>Missing data</h1>
<p>We count the number of missing values of each potential covariate for each pairwise analysis. Both the number of missing and the proportion missing (of the total number of observations with each arm) are plotted.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_missing_df</span> <span class="op">&lt;-</span> <span class="fu">count_missing</span><span class="op">(</span><span class="va">ec_rct1</span>, vars <span class="op">=</span> <span class="fu">get_ps_vars</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="proportion-missing" class="section level2">
<h2 class="hasAnchor">
<a href="#proportion-missing" class="anchor"></a>Proportion missing</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">n_missing_df</span>, yvar <span class="op">=</span> <span class="st">"prop_missing"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/propMissingPlot-1.png" width="960"></p>
</div>
<div id="number-missing" class="section level2">
<h2 class="hasAnchor">
<a href="#number-missing" class="anchor"></a>Number missing</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">n_missing_df</span>, yvar <span class="op">=</span> <span class="st">"n_missing"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/nMissingPlot-1.png" width="960"></p>
</div>
</div>
<div id="distribution-of-covariates" class="section level1 tabset tabset-pills">
<h1 class="hasAnchor">
<a href="#distribution-of-covariates" class="anchor"></a>Distribution of covariates</h1>
<p>The distributions of the covariates in the unadjusted sample are plotted to check the degree of imbalance prior to adjustment and check for outliers or coding errors. There are a couple of points worth noting:</p>
<ul>
<li><p><em>NCT01366131</em> did not collect smoking information.</p></li>
<li><p>It is not possible to determine whether a patient is a “Never” smoker in <em>NCT01493843</em> because there is only a “Former/never” category. Smoking status can therefore not be used for propensity score analyses for this trial.</p></li>
<li><p>Patients in a race category with fewer than 10 observations were coded as “Other” race.</p></li>
</ul>
<div id="age" class="section level2">
<h2 class="hasAnchor">
<a href="#age" class="anchor"></a>Age</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">plot_density</span><span class="op">(</span><span class="va">ec_rct1</span>, var <span class="op">=</span> <span class="st">"age"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/ageDensity-1.png" width="960"></p>
</div>
<div id="days-since-dx" class="section level2">
<h2 class="hasAnchor">
<a href="#days-since-dx" class="anchor"></a>Days since Dx</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">plot_density</span><span class="op">(</span><span class="va">ec_rct1</span>, var <span class="op">=</span> <span class="st">"days_since_dx"</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/daysSinceDxDensity-1.png" width="960"></p>
</div>
<div id="race" class="section level2">
<h2 class="hasAnchor">
<a href="#race" class="anchor"></a>Race</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">plot_bar</span><span class="op">(</span><span class="va">ec_rct1</span>, var <span class="op">=</span> <span class="st">"race_grouped"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/raceBarplot-1.png" width="960"></p>
</div>
<div id="sex" class="section level2">
<h2 class="hasAnchor">
<a href="#sex" class="anchor"></a>Sex</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">plot_bar</span><span class="op">(</span><span class="va">ec_rct1</span>, var <span class="op">=</span> <span class="st">"sex"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/sexBarplot-1.png" width="960"></p>
</div>
<div id="smoker" class="section level2">
<h2 class="hasAnchor">
<a href="#smoker" class="anchor"></a>Smoker</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">plot_bar</span><span class="op">(</span><span class="va">ec_rct1</span>, var <span class="op">=</span> <span class="st">"smoker_grouped"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/smokerBarplot-1.png" width="960"></p>
</div>
<div id="histology" class="section level2">
<h2 class="hasAnchor">
<a href="#histology" class="anchor"></a>Histology</h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">plot_bar</span><span class="op">(</span><span class="va">ec_rct1</span>, var <span class="op">=</span> <span class="st">"histology"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/histologyBarplot-1.png" width="960"></p>
</div>
<div id="cancer-stage" class="section level2">
<h2 class="hasAnchor">
<a href="#cancer-stage" class="anchor"></a>Cancer stage</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">plot_bar</span><span class="op">(</span><span class="va">ec_rct1</span>, var <span class="op">=</span> <span class="st">"stage_grouped"</span><span class="op">)</span></code></pre></div>
<p><img src="01-data-prep_files/figure-html/stageBarplot-1.png" width="960"></p>
</div>
</div>
<div id="categorical-variables-with-small-sample-sizes" class="section level1">
<h1 class="hasAnchor">
<a href="#categorical-variables-with-small-sample-sizes" class="anchor"></a>Categorical variables with small sample sizes</h1>
<p>The plots above suggest that some categories of the categorical variables might still have small sample sizes even after preprocessing. Categories of categorical variables with fewer than 10 observations are shown in the table below.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">count_by</span><span class="op">(</span><span class="va">ec_rct1</span>, vars <span class="op">=</span> <span class="fu">get_ps_catvars</span><span class="op">(</span><span class="op">)</span>, 
         by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"analysis_num"</span>, <span class="st">"source_type"</span><span class="op">)</span>,
         max_n <span class="op">=</span> <span class="fl">9</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">html_table</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table table table-striped table-responsive">
<thead><tr>
<th style="text-align:right;">
analysis_num
</th>
<th style="text-align:left;">
source_type
</th>
<th style="text-align:left;">
var
</th>
<th style="text-align:left;">
value
</th>
<th style="text-align:right;">
n
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
External
</td>
<td style="text-align:left;">
race_grouped
</td>
<td style="text-align:left;">
Asian
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
RCT
</td>
<td style="text-align:left;">
race_grouped
</td>
<td style="text-align:left;">
Other
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
RCT
</td>
<td style="text-align:left;">
smoker_grouped
</td>
<td style="text-align:left;">
Never
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
RCT
</td>
<td style="text-align:left;">
stage_grouped
</td>
<td style="text-align:left;">
Early
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
RCT
</td>
<td style="text-align:left;">
stage_grouped
</td>
<td style="text-align:left;">
Early
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
RCT
</td>
<td style="text-align:left;">
race_grouped
</td>
<td style="text-align:left;">
Other
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
RCT
</td>
<td style="text-align:left;">
race_grouped
</td>
<td style="text-align:left;">
Other
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
RCT
</td>
<td style="text-align:left;">
race_grouped
</td>
<td style="text-align:left;">
Other
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
External
</td>
<td style="text-align:left;">
race_grouped
</td>
<td style="text-align:left;">
Black
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
External
</td>
<td style="text-align:left;">
race_grouped
</td>
<td style="text-align:left;">
Other
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
External
</td>
<td style="text-align:left;">
smoker_grouped
</td>
<td style="text-align:left;">
Never
</td>
<td style="text-align:right;">
9
</td>
</tr>
</tbody>
</table>
</div>
<div id="save-output" class="section level1">
<h1 class="hasAnchor">
<a href="#save-output" class="anchor"></a>Save output</h1>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">analysis</span>, file <span class="op">=</span> <span class="st">"analysis-data-prep.rds"</span><span class="op">)</span></code></pre></div>
</div>
<div id="session-information" class="section level1">
<h1 class="hasAnchor">
<a href="#session-information" class="anchor"></a>Session information</h1>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## R version 4.0.0 (2020-04-24)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 18.04.5 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
## LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
## 
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] pins_0.4.5         kableExtra_1.3.4   ggplot2_3.3.5      ecmeta.nsclc_0.1.0
## [5] ecdata_0.2.1       dplyr_1.0.7       
## 
## loaded via a namespace (and not attached):
##  [1] svglite_2.0.0     lattice_0.20-45   tidyr_1.1.4       assertthat_0.2.1 
##  [5] rprojroot_2.0.2   digest_0.6.28     utf8_1.2.2        R6_2.5.1         
##  [9] backports_1.2.1   evaluate_0.14     highr_0.9         httr_1.4.2       
## [13] pillar_1.6.3      rlang_0.4.11      rstudioapi_0.13   data.table_1.14.2
## [17] jquerylib_0.1.4   Matrix_1.3-4      rmarkdown_2.11    pkgdown_1.6.1    
## [21] labeling_0.4.2    textshaping_0.3.5 desc_1.4.0        splines_4.0.0    
## [25] webshot_0.5.2     stringr_1.4.0     munsell_0.5.0     compiler_4.0.0   
## [29] xfun_0.26         pkgconfig_2.0.3   systemfonts_1.0.2 htmltools_0.5.2  
## [33] tidyselect_1.1.1  tibble_3.1.5      fansi_0.5.0       viridisLite_0.4.0
## [37] crayon_1.4.1      withr_2.4.2       rappdirs_0.3.3    grid_4.0.0       
## [41] xtable_1.8-4      jsonlite_1.7.2    gtable_0.3.0      lifecycle_1.0.1  
## [45] DBI_1.1.1         magrittr_2.0.1    scales_1.1.1      stringi_1.7.4    
## [49] cachem_1.0.6      farver_2.1.0      fs_1.5.0          xml2_1.3.2       
## [53] bslib_0.3.0       ellipsis_0.3.2    filelock_1.0.2    ragg_1.1.3       
## [57] generics_0.1.0    vctrs_0.3.8       tools_4.0.0       glue_1.4.2       
## [61] purrr_0.3.4       fastmap_1.1.0     survival_3.2-13   yaml_2.2.1       
## [65] colorspace_2.0-2  rvest_1.0.1       memoise_2.0.0     knitr_1.36       
## [69] sass_0.4.0</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Devin Incerti, Michael Bretscher, Ray Lin, Chris Harbron.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
